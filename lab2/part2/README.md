# Лабораторная работа №2
## Часть №2:Эмуляция отказа одного из дисков

- В этой части мы создадим ситуацию "отказа" одного из дисков, и установку нового диска с копированием даннах на него. Для выполнения советуется клонировать виртуалку с первой части и работать в ней.

-  Включаем виртуалку и через настройки виртуалки удаляем с SATA один диск в моем случае ssd1. В окне терминала должны показаться ошибки.
   Проверяем через cat /proc/mdstat , состояние рэйдов . Мы бы могли увидеть что у нас остался один активный рэйд. В моем случае это был /dev/sdb2
![Image alt](https://github.com/Metamfitamin/MetLab/blob/master/lab2/part2/VirtualBox_deb-met2_24_05_2020_14_43_26.png)
- После проверки добавляем в настройках виртуалки новый диск ssd3 и проверяем это через команду fdisk -l. Снизу видно что добавился новый диск /dev/sda
![Image alt](https://github.com/Metamfitamin/MetLab/blob/master/lab2/part2/VirtualBox_deb-met2_24_05_2020_14_43_59.png)
- Дальше с помощью команды  sfdisk -d /dev/sdb | sfdisk /dev/sda копируем таблицы разделов из sdb в новый sda.
![Image alt](https://github.com/Metamfitamin/MetLab/blob/master/lab2/part2/VirtualBox_deb-met2_24_05_2020_14_44_38.png)
- Cмотрим результат.
![Image alt](https://github.com/Metamfitamin/MetLab/blob/master/lab2/part2/VirtualBox_deb-met2_24_05_2020_14_44_53.png)
- Дальше добавляем новый рэйд массив в диск с помощью команды.mdadm --manage /dev/md0 --add /dev/sda2 
![Image alt](https://github.com/Metamfitamin/MetLab/blob/master/lab2/part2/VirtualBox_deb-met2_24_05_2020_14_50_01.png)
- На дальнейшие шаги к сожалению у меня фото не сохранились. Но я скажу что дальше мы должны скопировать в новый диск boot. И поставить на него grub. И это все! В итоге мы "поломали" свой диск , поставили другой диск и скопировали данные на него с еще живого диска. А также мы проверили насколько надежным может быть RAID1.


